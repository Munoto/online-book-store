{% extends 'base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<h2 class="book-heading">–ñ–∞–Ω—Ä—ã</h2>

<div class="mb-4">
    <div class="row justify-content-center">
        {% for genre in genres %}
            <div class="col-auto mb-2">
                <a href="{% url 'genre_books' genre.id %}" class="btn
                    {% if genres|length <= 5 %}btn-lg{% else %}btn-xl{% endif %}
                    btn-outline-primary genre-btn">
                    {{ genre.name }}
                </a>
            </div>
        {% empty %}
            <p>–ñ–∞–Ω—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
        {% endfor %}
    </div>
</div>

<h2 class="book-heading">–ö–Ω–∏–≥–∏</h2>
<div class="book-grid">
    {% for book in books %}
        <div class="book-card">
            <a href="{% url 'book_detail' book.id %}" class="book-card-link">
                <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" class="book-image">
                <h3>{{ book.title }}</h3>
                <p class="price">{{ book.price }} KZT</p>
                <p class="stock">–í –Ω–∞–ª–∏—á–∏–∏: {{ book.stock }} —à—Ç.</p>
            </a>
            <form action="{% url 'add_to_cart' book.id %}" method="post" class="cart-form">
                {% csrf_token %}
                <button type="submit" class="btn cart-btn">üõí –í –∫–æ—Ä–∑–∏–Ω—É</button>
            </form>
        </div>
    {% empty %}
        <p>–ö–Ω–∏–≥ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
    {% endfor %}
</div>

<h2 class="book-heading text-center">–ê–≤—Ç–æ—Ä—ã</h2>
<div class="container">
    <div class="row justify-content-center">
        {% for author in authors %}
            <div class="col-md-3 col-sm-6 mb-4">
                <div class="card">
                    <div class="card-body text-center">
                        <!-- –§–æ—Ç–æ –∞–≤—Ç–æ—Ä–∞ –≤ –∫—Ä—É–∂–∫–µ, –æ–±–µ—Ä–Ω—É—Ç–æ–µ –≤ —Å—Å—ã–ª–∫—É -->
                        <a href="{% url 'author_detail' author.id %}" class="text-decoration-none">
                            <div class="author-photo mb-3">
                                <img src="{{ author.photo.url }}" alt="{{ author.name }}" class="rounded-circle" style="width: 100px; height: 100px; object-fit: cover;">
                            </div>
                            <h5 class="card-title">{{ author.name }}</h5>
                        </a>
                    </div>
                </div>
            </div>
        {% empty %}
            <p>–ê–≤—Ç–æ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
        {% endfor %}
    </div>
</div>

{% endblock %}